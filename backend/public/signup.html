<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sign Up</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<div class="card" style="max-width:540px;margin:40px auto;padding:20px;">
  <h2>Create Account</h2>
  <label>User ID<br><input id="user" /></label><br><br>
  <label>Password<br><input id="pass" type="password" /></label><br><br>
  <button id="signupBtn">Sign Up</button>
  <p id="msg"></p>
</div>
<script>
document.getElementById('signupBtn').addEventListener('click', async () => {
  const user = document.getElementById('user').value.trim();
  const pass = document.getElementById('pass').value;
  if(!user || !pass) { alert('Enter both fields'); return; }
  const res = await fetch('/api/signup', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ user, pass }),
    credentials: 'include'
  });
  const j = await res.json();
  document.getElementById('msg').textContent = j.ok ? 'Account created' : ('Error: ' + (j.error || JSON.stringify(j)));
  if(j.ok){
    sessionStorage.setItem('user', user);   // per-tab storage
    setTimeout(() => location.href='get-started.html', 800);
  }
});
</script>
</body>
</html>
